<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anteprima Vetrina - Pro Loco</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --primary-color: #b01c1c; }
        body { font-family: 'Segoe UI', sans-serif; color: #333; }
        .navbar-brand { text-align: center; display: block; width: 100%; font-weight: bold; line-height: 1.2; }
        .hero-section { background-size: cover; background-position: center; height: 50vh; display: flex; align-items: center; justify-content: center; color: white; text-align: center; }
        .section-title { color: var(--primary-color); font-weight: bold; margin-bottom: 2rem; text-align: center; position: relative; padding-bottom: 10px; }
        .section-title::after { content: ''; width: 50px; height: 3px; background: var(--primary-color); position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); }
        .gallery-img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .gallery-img:hover { transform: scale(1.03); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .map-container { position: relative; padding-bottom: 45%; height: 0; overflow: hidden; border-radius: 15px; }
        .map-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0; }
        #photoModal { display: none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; }
        #photoModal img { max-width: 90%; max-height: 90%; }
    </style>
</head>
<body>

<nav class="navbar navbar-light bg-white shadow-sm py-3"><div class="container"><span class="navbar-brand" id="nav-brand">...</span></div></nav>

<section class="hero-section" id="hero-bg">
    <div class="container"><h1 class="display-4 fw-bold" id="hero-titolo"></h1><p class="lead fs-3" id="hero-sottotitolo"></p></div>
</section>

<section class="container my-5 py-4 text-center">
    <h2 class="section-title" id="mission-titolo"></h2>
    <p class="lead px-md-5" id="mission-testo"></p>
    <div id="attivita-lista" class="d-flex flex-wrap justify-content-center gap-2 mt-4"></div>
</section>

<section class="bg-light py-5">
    <div class="container text-center">
        <h2 class="section-title" id="biblio-titolo"></h2>
        <p class="lead mb-4" id="biblio-testo"></p>
        <img id="chi-siamo-img" src="" class="img-fluid rounded shadow" style="max-height:350px;">
    </div>
</section>

<section class="container my-5 py-5">
    <h2 class="section-title" id="gallery-titolo"></h2>
    <div class="row g-3" id="gallery-container"></div>
</section>

<section class="container mb-5 pb-5 text-center">
    <h2 class="section-title" id="mappa-titolo"></h2>
    <p class="mb-4" id="indirizzo-testo"></p>
    <div class="map-container">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12173.468204901353!2d15.9458212!3d40.5841961!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x133917855017409f%3A0x639233f2694939a9!2s85010%20Albano%20di%20Lucania%20PZ!5e0!3m2!1sit!2sit!4v1700000000000" allowfullscreen="" loading="lazy"></iframe>
    </div>
</section>

<footer class="py-5 bg-dark text-white text-center">
    <div class="container"><p id="footer-text"></p><p>Email: <strong id="contatto-mail"></strong></p></div>
</footer>

<div id="photoModal" onclick="this.style.display='none'"><img id="modalImg"></div>

<script>
    fetch('./contenuti-vetrina.json?v=' + new Date().getTime())
        .then(response => response.json())
        .then(data => {
            document.getElementById('nav-brand').innerHTML = data.nomeProLoco;
            document.getElementById('hero-titolo').innerText = data.heroTitolo;
            document.getElementById('hero-sottotitolo').innerText = data.heroSottotitolo;
            document.getElementById('mission-titolo').innerText = data.sezioneMissionTitolo;
            document.getElementById('mission-testo').innerText = data.sezioneMissionTesto;
            document.getElementById('biblio-titolo').innerText = data.sezioneBibliotecaTitolo;
            document.getElementById('biblio-testo').innerText = data.sezioneBibliotecaTesto;
            document.getElementById('gallery-titolo').innerText = data.sezioneGalleryTitolo;
            document.getElementById('mappa-titolo').innerText = data.sezioneMappaTitolo;
            document.getElementById('indirizzo-testo').innerText = data.indirizzoProLoco;
            document.getElementById('contatto-mail').innerText = data.emailContatto;
            document.getElementById('footer-text').innerHTML = "Â© 2026 " + data.nomeProLoco;
            document.documentElement.style.setProperty('--primary-color', data.coloreSito);
            document.getElementById('hero-bg').style.backgroundImage = "linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('" + data.fotoSfondo + "')";
            document.getElementById('chi-siamo-img').src = data.fotoCentrale;

            const attivita = data.sezioneAttivitaElenco.split(',');
            document.getElementById('attivita-lista').innerHTML = attivita.map(a => `<span class="badge bg-danger p-2 fs-6">${a.trim()}</span>`).join('');

            const gallery = document.getElementById('gallery-container');
            data.fotoGallery.forEach(src => {
                const col = document.createElement('div');
                col.className = 'col-6 col-md-3';
                col.innerHTML = `<img src="${src}" class="gallery-img" onclick="openPhoto('${src}')">`;
                gallery.appendChild(col);
            });
        });

    function openPhoto(src) {
        document.getElementById('modalImg').src = src;
        document.getElementById('photoModal').style.display = 'flex';
    }
</script>
</body>
</html>
