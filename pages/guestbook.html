<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diario di Bordo - Pro Loco Albano</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary-color: #5d9cec; --accent-color: #4fc1e9; --light-bg: #f5f9ff; }
        body { font-family: 'Segoe UI', sans-serif; color: #4a4a4a; }
        .navbar-brand { color: var(--primary-color) !important; font-weight: bold; line-height: 1.2; }
        .nav-link { font-weight: 600; font-size: 0.85rem !important; text-transform: uppercase; color: #666 !important; }
        .hero-section { background: var(--primary-color); height: 35vh; display: flex; align-items: center; justify-content: center; text-align: center; color: white; }
        .section-title { color: var(--primary-color); font-weight: bold; margin-bottom: 2rem; position: relative; padding-bottom: 15px; }
        .section-title::after { content: ''; width: 40px; height: 3px; background: #ccd1d9; position: absolute; bottom: 0; left: 0; }
        .message-card { background: var(--light-bg); border-radius: 12px; padding: 20px; margin-bottom: 20px; border-left: 5px solid var(--primary-color); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .form-container { background: #fff; border: 1px solid #eee; border-radius: 15px; padding: 30px; box-shadow: 0 8px 25px rgba(0,0,0,0.08); }
        .btn-invia { background: var(--primary-color); color: white; border-radius: 50px; font-weight: bold; padding: 12px; border: none; width: 100%; transition: 0.3s; }
        .btn-invia:hover { background: #4a89dc; transform: translateY(-2px); }
        footer { background: var(--primary-color); color: white; padding: 40px 0; text-align: center; margin-top: 50px; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm py-1">
    <div class="container-fluid px-4">
        <a class="navbar-brand" href="../index.html" id="nav-brand">PRO LOCO ALBANO</a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="chi-siamo.html">Chi siamo</a></li>
                <li class="nav-item"><a class="nav-link" href="guestbook.html" style="color: var(--accent-color) !important;"><i class="fas fa-pen-fancy"></i> Diario</a></li>
            </ul>
        </div>
    </div>
</nav>

<header class="hero-section" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('../immagini/sfondo-guest.jpg'); background-size: cover;">
    <div class="container">
        <h1 class="display-4 fw-bold">Diario di Bordo</h1>
        <p class="lead">Lascia un pensiero sulla tua visita</p>
    </div>
</header>

<main class="container my-5">
    <div class="row g-5">
        <div class="col-lg-7">
            <h2 class="section-title">I vostri pensieri</h2>
            <div id="lista-messaggi"></div>
        </div>
        <div class="col-lg-5">
            <div class="form-container sticky-top" style="top: 110px;">
                <h3 class="fw-bold mb-4" style="color: var(--primary-color);">Scrivi sul Diario</h3>
                <form id="guestForm">
                    <div class="mb-3"><label class="fw-bold small">Nome</label><input type="text" class="form-control" id="autore" required></div>
                    <div class="mb-3"><label class="fw-bold small">Messaggio</label><textarea class="form-control" id="testo" rows="5" required></textarea></div>
                    <button type="submit" class="btn-invia">Invia Messaggio</button>
                    <div id="msg-ok" class="mt-3 text-success d-none small">Grazie! Messaggio inviato.</div>
                </form>
            </div>
        </div>
    </div>
</main>

<footer>
    <div class="container">
        <p id="footer-text"></p>
        <p>Email: <strong id="contatto-mail"></strong></p>
    </div>
</footer>

<script>
    async function init() {
        try {
            const resV = await fetch('../contenuti-vetrina.json');
            const dataV = await resV.json();
            document.getElementById('nav-brand').innerHTML = dataV.nomeProLoco;
            document.getElementById('contatto-mail').innerText = dataV.emailContatto;
            document.getElementById('footer-text').innerText = "Â© 2026 " + dataV.nomeProLoco;

            const resG = await fetch('../dati/guestbook.json');
            const messaggi = await resG.json();
            const box = document.getElementById('lista-messaggi');
            box.innerHTML = messaggi.map(m => `
                <div class="message-card">
                    <div class="d-flex justify-content-between mb-2"><strong>${m.nome}</strong><small>${m.data}</small></div>
                    <p class="mb-0"><em>"${m.testo}"</em></p>
                </div>`).join('');
        } catch (e) { console.error(e); }
    }
    document.getElementById('guestForm').onsubmit = (e) => { e.preventDefault(); document.getElementById('msg-ok').classList.remove('d-none'); e.target.reset(); };
    init();
</script>
</body>
</html>
